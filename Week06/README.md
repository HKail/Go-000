# 学习笔记

## 课间记录

### 过载保护

- 令牌桶算法（单机）

  /x/time/rate

- 漏斗桶算法（单机）

  go.uber.org/ratelimit

- 利特尔法则
- 可控延迟算法：CoDel
- 滑动均值

### 限流

- 最大最小公平分享（Max-Min Fairness）

## 作业题目

1. 参考 Hystrix 实现一个滑动窗口计数器。

## 作业内容

详情：[main.go](./main.go)

### 计数器算法

- 在指定时间内，对请求的次数进行计数，若到达时间的临界点，则对计数进行清零。
- 在指定时间内，若计数量超过某个指标，则进行限流。
- 该算法存在的问题是，在临界点的两端可能出现两倍的流速。

### 滑动窗口计数器算法

- 基于计数器算法，对指定时间再进行分割。例如，要限制每秒只能处理 100 个请求，并把 1 秒分为 10 个窗口，则每 100 毫秒滑动一次窗口，在每个窗口中存放该窗口当前的请求次数，每次移动时判断一下总次数是否已超限。
- 当窗口划分得越多，则窗口的滑动就会越平滑，限流的统计也会越精确。有点类似于数学知识中的定积分。
- 使用滑动窗口计数器算法可以有效地解决计数器算法中的临界点两端的流速超额问题。

